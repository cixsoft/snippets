(function(k){k.colorwheel=function(x,y,a,b,c){return new n(x,y,a,b,c)};var l=Math.PI,htmlColorNames={"#F0F8FF":"AliceBlue","#FAEBD7":"AntiqueWhite","#00FFFF":"Aqua/Cyan","#7FFFD4":"Aquamarine","#F0FFFF":"Azure","#F5F5DC":"Beige","#FFE4C4":"Bisque","#000000":"Black","#000":"Black","#FFEBCD":"BlanchedAlmond","#0000FF":"Blue","#8A2BE2":"BlueViolet","#A52A2A":"Brown","#DEB887":"BurlyWood","#5F9EA0":"CadetBlue","#7FFF00":"Chartreuse","#D2691E":"Chocolate","#FF7F50":"Coral","#6495ED":"CornflowerBlue","#FFF8DC":"Cornsilk","#DC143C":"Crimson","#00008B":"DarkBlue","#008B8B":"DarkCyan","#B8860B":"DarkGoldenRod","#A9A9A9":"DarkGray","#006400":"DarkGreen","#BDB76B":"DarkKhaki","#8B008B":"DarkMagenta","#556B2F":"DarkOliveGreen","#FF8C00":"Darkorange","#9932CC":"DarkOrchid","#8B0000":"DarkRed","#E9967A":"DarkSalmon","#8FBC8F":"DarkSeaGreen","#483D8B":"DarkSlateBlue","#2F4F4F":"DarkSlateGray","#00CED1":"DarkTurquoise","#9400D3":"DarkViolet","#FF1493":"DeepPink","#00BFFF":"DeepSkyBlue","#696969":"DimGray","#1E90FF":"DodgerBlue","#B22222":"FireBrick","#FFFAF0":"FloralWhite","#228B22":"ForestGreen","#FF00FF":"Fuchsia/Magenta","#DCDCDC":"Gainsboro","#F8F8FF":"GhostWhite","#FFD700":"Gold","#DAA520":"GoldenRod","#808080":"Gray","#008000":"Green","#ADFF2F":"GreenYellow","#F0FFF0":"HoneyDew","#FF69B4":"HotPink","#CD5C5C":"IndianRed","#4B0082":"Indigo","#FFFFF0":"Ivory","#F0E68C":"Khaki","#E6E6FA":"Lavender","#FFF0F5":"LavenderBlush","#7CFC00":"LawnGreen","#FFFACD":"LemonChiffon","#ADD8E6":"LightBlue","#F08080":"LightCoral","#E0FFFF":"LightCyan","#FAFAD2":"LightGoldenRodYellow","#D3D3D3":"LightGrey","#90EE90":"LightGreen","#FFB6C1":"LightPink","#FFA07A":"LightSalmon","#20B2AA":"LightSeaGreen","#87CEFA":"LightSkyBlue","#778899":"LightSlateGray","#B0C4DE":"LightSteelBlue","#FFFFE0":"LightYellow","#00FF00":"Green","#FF8000":"Orange","#80FF00":"Lime","#00FF80":"Cyan-Green","#0080FF":"Cyan-Blue","#8000FF":"Purple","#FF0080":"Pink","#32CD32":"LimeGreen","#FAF0E6":"Linen","#800000":"Maroon","#66CDAA":"MediumAquaMarine","#0000CD":"MediumBlue","#BA55D3":"MediumOrchid","#9370D8":"MediumPurple","#3CB371":"MediumSeaGreen","#7B68EE":"MediumSlateBlue","#00FA9A":"MediumSpringGreen","#48D1CC":"MediumTurquoise","#C71585":"MediumVioletRed","#191970":"MidnightBlue","#F5FFFA":"MintCream","#FFE4E1":"MistyRose","#FFE4B5":"Moccasin","#FFDEAD":"NavajoWhite","#000080":"Navy","#FDF5E6":"OldLace","#808000":"Olive","#6B8E23":"OliveDrab","#FFA500":"Orange","#FF4500":"OrangeRed","#DA70D6":"Orchid","#EEE8AA":"PaleGoldenRod","#98FB98":"PaleGreen","#AFEEEE":"PaleTurquoise","#D87093":"PaleVioletRed","#FFEFD5":"PapayaWhip","#FFDAB9":"PeachPuff","#CD853F":"Peru","#FFC0CB":"Pink","#DDA0DD":"Plum","#B0E0E6":"PowderBlue","#800080":"Purple","#FF0000":"Red","#BC8F8F":"RosyBrown","#4169E1":"RoyalBlue","#8B4513":"SaddleBrown","#FA8072":"Salmon","#F4A460":"SandyBrown","#2E8B57":"SeaGreen","#FFF5EE":"SeaShell","#A0522D":"Sienna","#C0C0C0":"Silver","#87CEEB":"SkyBlue","#6A5ACD":"SlateBlue","#708090":"SlateGray","#FFFAFA":"Snow","#00FF7F":"SpringGreen","#4682B4":"SteelBlue","#D2B48C":"Tan","#008080":"Teal","#D8BFD8":"Thistle","#FF6347":"Tomato","#40E0D0":"Turquoise","#EE82EE":"Violet","#F5DEB3":"Wheat","#FFFFFF":"White","#FFF":"White","#F5F5F5":"WhiteSmoke","#FFFF00":"Yellow","#9ACD32":"YellowGreen"};function angle(x,y){return(x<0)*180+Math.atan(-y/-x)*180/l}function random(a,b){return Math.round(a+(b-a)*Math.random())}function toHtmlColorName(a){a=a.toUpperCase();if(a in htmlColorNames){return htmlColorNames[a]}return""}function toFixed(f,a){a=a||2;return Math.round(f*Math.pow(10,a))+'%'}var m=document,win=window;var n=function(x,y,d,e,f){d=d||200;var g=3*d/200,w1=d/200,fi=1.6180339887,segments=l*d/5,size20=d/20,size2=d/2,padding=2*d/200,sin30=0.5,cos30=0.8660254038,t=this;var H=1,S=1,B=1,s=d-(size20*4);var r=f?k(f,d,d):k(x,y,d,d),xy=s/6+size20*2+padding,wh=s*2/3-padding*2;w1<1&&(w1=1);g<1&&(g=1);var a=l/2-l*2/segments*1.3,R=size2-padding,R2=size2-padding-size20*2,path=["M",size2,padding,"A",R,R,0,0,1,R*Math.cos(a)+R+padding,R-R*Math.sin(a)+padding,"L",R2*Math.cos(a)+R+padding,R-R2*Math.sin(a)+padding,"A",R2,R2,0,0,0,size2,padding+size20*2,"z"].join();for(var i=0;i<segments;i++){r.path(path).attr({stroke:"none",fill:"hsb("+i*(255/segments)+", 255, 255)",rotation:[(360/segments)*i,size2,size2]})}r.path(["M",size2,padding,"A",R,R,0,1,1,size2-1,padding,"l1,0","M",size2,padding+size20*2,"A",R2,R2,0,1,1,size2-1,padding+size20*2,"l1,0"]).attr({"stroke-width":g,opacity:0.5,stroke:"#ccc"});t.cursorhsb=r.set();var h=size20*2+2;t.cursorhsb.push(r.rect(size2-h/fi/2,padding-1,h/fi,h,3*d/200).attr({stroke:"#000",opacity:0.5,"stroke-width":g}));t.cursorhsb.push(t.cursorhsb[0].clone().attr({stroke:"#fff",opacity:1,"stroke-width":w1}));t.ring=r.path(["M",size2,padding,"A",R,R,0,1,1,size2-1,padding,"l1,0M",size2,padding+size20*2,"A",R2,R2,0,1,1,size2-1,padding+size20*2,"l1,0"]).attr({fill:"#000",opacity:0,stroke:"none"});t.main=r.rect(xy,xy,wh,wh).attr({stroke:"none",fill:"#f00",opacity:1});t.main.clone().attr({stroke:"none",fill:"0-#fff-#fff",opacity:0});t.square=r.rect(xy-1,xy-1,wh+2,wh+2).attr({r:2,fill:"90-#000-#000",opacity:0,cursor:"crosshair",stroke:"#ccc","stroke-width":w1});t.cursor=r.set();t.cursor.push(r.circle(size2,size2,size20/2).attr({stroke:"#000",opacity:0.5,"stroke-width":g}));t.cursor.push(t.cursor[0].clone().attr({stroke:"#fff",opacity:1,"stroke-width":w1}));t.triangleS=r.path();t.drawTriangleS=function(x){t.triangleS.attr({path:['M',x-size20/2*sin30,xy-w1-w1-cos30*size20/2,'l',size20/2,0,-size20/2*sin30,cos30*size20/2,'z'],fill:"hsb("+[t.H,t.S,1].join(',')+")",stroke:"none"})};t.triangleB=r.path();t.drawTriangleB=function(y){t.triangleB.attr({path:['M',xy-w1-cos30*size20/2,y+size20/2*sin30,'l',0,-size20/2,cos30*size20/2,sin30*size20/2,'z'],fill:"hsb("+[t.H,0,t.B].join(',')+")",stroke:"none"})};t.text=r.text();t.drawColorText=function(a){a=a?k.getRGB(a):k.hsb2rgb(t.H,t.S,t.B);var b=a.hex;a=k.rgb2hsb(a.r,a.g,a.b);t.text.attr({text:"H:"+Math.round(a.h*360)+"Â°"+"  S:"+toFixed(a.s)+"  B:"+toFixed(a.b)+"\n"+b.toUpperCase()+"\n"+toHtmlColorName(b)});t.text.attr({x:t.xy+t.wh/2,y:t.xy+t.wh+t.text.getBBox().height/2+w1})};t.H=t.S=t.B=1;t.raphael=r;t.size2=size2;t.wh=wh;t.x=x;t.xy=xy;t.y=y;t.ring.drag(function(a,b,x,y){t.docOnMove(a,b,x,y)},function(x,y){t.hsbOnTheMove=true;t.setH(x-t.x-t.size2,y-t.y-t.size2)},function(){t.hsbOnTheMove=false});t.square.drag(function(a,b,x,y){t.docOnMove(a,b,x,y)},function(x,y){t.clrOnTheMove=true;t.setSB(x-t.x,y-t.y)},function(){t.clrOnTheMove=false});t.triangleS.drag(function(a,b,x,y){t.docOnMove(a,b,x,y)},function(x,y){var a=m.documentElement.scrollLeft||m.body.scrollLeft;t.sOnTheMove=true;t.setS(x+a-t.x)},function(){t.sOnTheMove=false});t.triangleB.drag(function(a,b,x,y){t.docOnMove(a,b,x,y)},function(x,y){var a=m.documentElement.scrollTop||m.body.scrollTop;t.bOnTheMove=true;t.setB(y+a-t.y)},function(){t.bOnTheMove=false});var j=[];for(var c in htmlColorNames){if(htmlColorNames.hasOwnProperty(c)){c=c.toUpperCase();if(c!="#000"&&c!="#000000"&&c!="#FFF"&&c!="#FFFFFF"){j.push(c)}}}t.color(e||j[random(0,j.length-1)]);this.onchanged&&this.onchanged(this.color())};n.prototype.setH=function(x,y){var d=angle(x,y),rd=d*l/180;this.cursorhsb.rotate(d+90,this.size2,this.size2);this.H=(d+90)/360;this.main.attr({fill:"hsb("+this.H+",1,1)"});this.triangleS.attr({fill:"hsb("+[this.H,this.S,1].join(',')+")"});this.drawColorText();this.onchange&&this.onchange(this.color())};n.prototype.setS=function(x){x<this.size2-this.wh/2&&(x=this.size2-this.wh/2);x>this.size2+this.wh/2&&(x=this.size2+this.wh/2);this.cursor.attr({cx:x});this.S=(x-this.xy)/this.wh;this.drawTriangleS(x);this.drawColorText();this.onchange&&this.onchange(this.color())};n.prototype.setB=function(y){y<this.size2-this.wh/2&&(y=this.size2-this.wh/2);y>this.size2+this.wh/2&&(y=this.size2+this.wh/2);this.cursor.attr({cy:y});this.B=1-(y-this.xy)/this.wh;this.drawTriangleB(y);this.drawColorText();this.onchange&&this.onchange(this.color())};n.prototype.setSB=function(x,y){x<this.size2-this.wh/2&&(x=this.size2-this.wh/2);x>this.size2+this.wh/2&&(x=this.size2+this.wh/2);y<this.size2-this.wh/2&&(y=this.size2-this.wh/2);y>this.size2+this.wh/2&&(y=this.size2+this.wh/2);this.cursor.attr({cx:x,cy:y});this.B=1-(y-this.xy)/this.wh;this.S=(x-this.xy)/this.wh;this.drawTriangleS(x);this.drawTriangleB(y);this.drawColorText();this.onchange&&this.onchange(this.color())};n.prototype.docOnMove=function(a,b,x,y){var c=m.documentElement.scrollTop||m.body.scrollTop,scrollX=m.documentElement.scrollLeft||m.body.scrollLeft;if(this.hsbOnTheMove){this.setH(x-this.x-this.size2,y-this.y-this.size2)}if(this.sOnTheMove){this.setS(x+scrollX-this.x)}if(this.bOnTheMove){this.setB(y+c-this.y)}if(this.clrOnTheMove){this.setSB(x-this.x,y-this.y)}};n.prototype.remove=function(){this.raphael.remove();this.color=function(){return false}};n.prototype.color=function(a){if(a){this.drawColorText(a);a=k.getRGB(a);a=k.rgb2hsb(a.r,a.g,a.b);var d=a.h*360;this.H=a.h;this.S=a.s;this.B=a.b;this.cursorhsb.rotate(d,this.size2,this.size2);this.main.attr({fill:"hsb("+this.H+",1,1)"});var x=this.S*this.wh+this.xy,y=(1-this.B)*this.wh+this.xy;this.cursor.attr({cx:x,cy:y});this.drawTriangleS(x);this.drawTriangleB(y);this.onchange&&this.onchange(this.color());return this}else{return k.hsb2rgb(this.H,this.S,this.B).hex}}})(window.Raphael);